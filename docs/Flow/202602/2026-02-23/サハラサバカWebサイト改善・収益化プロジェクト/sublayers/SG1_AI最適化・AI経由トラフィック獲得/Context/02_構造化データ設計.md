# 構造化データ設計

## Schema.org構造化データとは

### 概要
- **目的**: 検索エンジン・AIにサイト内容を正確に伝える
- **形式**: JSON-LD（推奨）、Microdata、RDFa
- **配置**: HTMLの`<script type="application/ld+json">`内

### AI検索での重要性
- **正確な理解**: AIがページ内容を正しく解釈
- **引用の精度**: AI検索結果での正確な情報表示
- **優先表示**: 構造化データがあるページは優先される傾向

---

## サハラサバカ用Schema.org設計

### 1. Person（運営者情報）

**配置場所**: `/profile`

```json
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "井上周",
  "alternateName": "INOUE Amane",
  "givenName": "周",
  "familyName": "井上",
  "nationality": {
    "@type": "Country",
    "name": "Japan"
  },
  "jobTitle": "ソフトウェアエンジニア",
  "description": "2025年サハラマラソン（Marathon Des Sables）完走者。「小さな挑戦が大きな挑戦につながる」をテーマに情報発信。",
  "url": "https://saharasabaka.vercel.app/profile",
  "sameAs": [
    "https://note.com/amaino/",
    "https://github.com/[username]",
    "https://twitter.com/[username]"
  ],
  "alumniOf": {
    "@type": "CollegeOrUniversity",
    "name": "金沢工業大学"
  },
  "birthPlace": {
    "@type": "Place",
    "address": {
      "@type": "PostalAddress",
      "addressRegion": "群馬県"
    }
  },
  "knowsAbout": [
    "マラソン",
    "ウルトラマラソン",
    "サハラマラソン",
    "ランニング",
    "ソフトウェアエンジニアリング"
  ]
}
```

---

### 2. SportsEvent（サハラマラソン）

**配置場所**: `/race`

```json
{
  "@context": "https://schema.org",
  "@type": "SportsEvent",
  "name": "Marathon Des Sables 2025",
  "alternateName": "サハラマラソン",
  "description": "モロッコのサハラ砂漠で開催される250kmウルトラマラソン。7日間で全ての衣食住を背負って走る世界で最も過酷なレース。",
  "startDate": "2025-04-XX",
  "endDate": "2025-04-XX",
  "location": {
    "@type": "Place",
    "name": "サハラ砂漠",
    "address": {
      "@type": "PostalAddress",
      "addressCountry": "MA",
      "addressRegion": "Morocco"
    }
  },
  "organizer": {
    "@type": "Organization",
    "name": "Marathon Des Sables Organization",
    "url": "https://www.marathondessables.com/"
  },
  "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
  "eventStatus": "https://schema.org/EventScheduled",
  "sport": "Running",
  "distance": "250 kilometers",
  "duration": "P7D",
  "competitor": {
    "@type": "Person",
    "name": "井上周"
  }
}
```

---

### 3. Article（ブログ記事・レビュー）

**配置場所**: ブログ記事各ページ

```json
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": "サハラマラソン推奨装備：HOKA Speedgoat 5レビュー",
  "alternativeHeadline": "250km走破に使用したトレイルランニングシューズ",
  "description": "サハラマラソン250kmで実際に使用したHOKA Speedgoat 5の詳細レビュー。砂地でのグリップ力、耐久性、重量感を実体験から解説。",
  "image": "https://saharasabaka.vercel.app/images/speedgoat5.jpg",
  "author": {
    "@type": "Person",
    "name": "井上周",
    "url": "https://saharasabaka.vercel.app/profile"
  },
  "publisher": {
    "@type": "Organization",
    "name": "サハラサバカ",
    "logo": {
      "@type": "ImageObject",
      "url": "https://saharasabaka.vercel.app/logo.png"
    }
  },
  "datePublished": "2025-05-XX",
  "dateModified": "2025-05-XX",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://saharasabaka.vercel.app/equipments/speedgoat5"
  },
  "keywords": [
    "サハラマラソン",
    "装備",
    "ランニングシューズ",
    "HOKA",
    "トレイルランニング"
  ],
  "articleSection": "装備レビュー",
  "wordCount": 1500
}
```

---

### 4. Product（装備レビュー）

**配置場所**: `/equipments` 各装備ページ

```json
{
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "HOKA Speedgoat 5",
  "description": "トレイルランニングシューズ。サハラマラソン250kmで使用し、優れたグリップ力と耐久性を実証。",
  "image": "https://saharasabaka.vercel.app/images/speedgoat5.jpg",
  "brand": {
    "@type": "Brand",
    "name": "HOKA ONE ONE"
  },
  "category": "ランニングシューズ",
  "offers": {
    "@type": "Offer",
    "price": "19800",
    "priceCurrency": "JPY",
    "availability": "https://schema.org/InStock",
    "url": "https://www.amazon.co.jp/dp/XXXXXX"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5",
    "bestRating": "5",
    "worstRating": "1",
    "ratingCount": "1",
    "reviewCount": "1"
  },
  "review": {
    "@type": "Review",
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": "5",
      "bestRating": "5"
    },
    "author": {
      "@type": "Person",
      "name": "井上周"
    },
    "reviewBody": "サハラマラソン250kmで使用。砂地でのグリップ力が優れており、耐久性も問題なし。重量315gと軽量で長距離でも足への負担が少ない。",
    "datePublished": "2025-05-XX"
  },
  "additionalProperty": [
    {
      "@type": "PropertyValue",
      "name": "重量",
      "value": "315g（片足）"
    },
    {
      "@type": "PropertyValue",
      "name": "ドロップ",
      "value": "4mm"
    },
    {
      "@type": "PropertyValue",
      "name": "使用距離",
      "value": "250km（サハラマラソン）"
    }
  ]
}
```

---

### 5. FAQPage（よくある質問）

**配置場所**: FAQ専用ページまたは各ページ内

```json
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "サハラマラソンの参加費用は？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "エントリー費用は約40-50万円（年により変動）。これに渡航費、装備費、保険料等が加わり、総額は約100万円前後になります。"
      }
    },
    {
      "@type": "Question",
      "name": "サハラマラソンに必要なトレーニング期間は？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "最低6ヶ月、推奨は1年以上のトレーニング期間を設けることをお勧めします。フルマラソン完走経験がある方でも、ウルトラマラソン特有のトレーニングが必要です。"
      }
    },
    {
      "@type": "Question",
      "name": "おすすめのランニングシューズは？",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "HOKA Speedgoat 5を使用しました。砂地でのグリップ力、クッション性、耐久性のバランスが優れています。重量は315g（片足）と軽量で、250km走破しても故障はありませんでした。"
      }
    }
  ]
}
```

---

### 6. WebSite（サイト全体）

**配置場所**: トップページ（`/`）

```json
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "サハラサバカ",
  "alternateName": "Sahara Sabaka",
  "url": "https://saharasabaka.vercel.app",
  "description": "サハラマラソン挑戦の記録と情報発信サイト。「小さな挑戦が大きな挑戦につながる」をテーマに、装備レビュー、トレーニング方法、挑戦のストーリーを共有。",
  "publisher": {
    "@type": "Person",
    "name": "井上周"
  },
  "inLanguage": ["ja", "en"],
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "https://saharasabaka.vercel.app/search?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
```

---

## 実装方法

### React + TypeScriptでの実装

**1. 共通コンポーネント作成**

```typescript
// src/components/StructuredData.tsx
import React from 'react';

interface StructuredDataProps {
  data: object;
}

export const StructuredData: React.FC<StructuredDataProps> = ({ data }) => {
  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(data) }}
    />
  );
};
```

**2. ページでの使用例**

```typescript
// src/pages/ProfilePage.tsx
import { StructuredData } from '../components/StructuredData';

const personSchema = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "井上周",
  // ... 省略
};

function ProfilePage() {
  return (
    <>
      <StructuredData data={personSchema} />
      {/* ページコンテンツ */}
    </>
  );
}
```

---

## 検証方法

### Google Rich Results Test
```
https://search.google.com/test/rich-results
```

### Schema.org Validator
```
https://validator.schema.org/
```

### 実装チェックリスト
- [ ] 全Schema.orgタイプで`@context`と`@type`が正しい
- [ ] 必須プロパティが全て含まれている
- [ ] URLは絶対パス（https://）を使用
- [ ] 日付はISO 8601形式
- [ ] バリデーターでエラーなし

---

## 優先順位

### フェーズ1（即実装）
1. **WebSite**（トップページ）
2. **Person**（プロフィールページ）
3. **SportsEvent**（レースページ）

### フェーズ2（コンテンツ追加と同時）
4. **Article**（ブログ記事）
5. **Product**（装備レビュー）
6. **FAQPage**（FAQ追加時）
